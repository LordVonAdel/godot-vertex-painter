[gd_scene load_steps=9 format=3 uid="uid://bnfl4nwux8mc4"]

[ext_resource type="Script" uid="uid://dobpv4xos5msa" path="res://addons/vertex_painter/vertex_painter_ui.gd" id="1_vhkhp"]
[ext_resource type="Script" uid="uid://bgwl2arbuma7" path="res://addons/vertex_painter/vertex_painter_3d.gd" id="2_vflpc"]
[ext_resource type="Shader" uid="uid://etvg4calsus4" path="res://addons/vertex_painter/gpu_depth.gdshader" id="3_8jrka"]

[sub_resource type="Environment" id="Environment_hpdng"]

[sub_resource type="QuadMesh" id="QuadMesh_4magw"]
size = Vector2(0.1, 0.1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yrme8"]
render_priority = 0
shader = ExtResource("3_8jrka")
shader_parameter/camera_far = 10000.0

[sub_resource type="SphereMesh" id="SphereMesh_8olv6"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_eghqw"]
transparency = 1
albedo_color = Color(1, 1, 1, 0.07450981)

[node name="VertexPainter" type="CenterContainer" node_paths=PackedStringArray("input_color", "input_brush_size", "input_enabled", "input_blend_mode", "input_weight")]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
script = ExtResource("1_vhkhp")
input_color = NodePath("VBoxContainer/ColorPicker")
input_brush_size = NodePath("VBoxContainer/BrushSize")
input_enabled = NodePath("VBoxContainer/EnableCheckBox")
input_blend_mode = NodePath("VBoxContainer/BlendModes")
input_weight = NodePath("VBoxContainer/BrushWeight")

[node name="VBoxContainer" type="VBoxContainer" parent="."]
layout_mode = 2

[node name="EnableCheckBox" type="CheckBox" parent="VBoxContainer"]
layout_mode = 2
text = "Enable Vertex Painting"

[node name="ColorPicker" type="ColorPicker" parent="VBoxContainer"]
layout_mode = 2
edit_alpha = false
color_mode = 1
sampler_visible = false
color_modes_visible = false
sliders_visible = false
presets_visible = false

[node name="Label" type="Label" parent="VBoxContainer"]
layout_mode = 2
text = "Brush Size:"

[node name="BrushSize" type="HSlider" parent="VBoxContainer"]
layout_mode = 2
min_value = 0.1
max_value = 10.0
step = 0.01
value = 0.5
allow_greater = true

[node name="Label2" type="Label" parent="VBoxContainer"]
layout_mode = 2
text = "Brush Weight:"

[node name="BrushWeight" type="HSlider" parent="VBoxContainer"]
layout_mode = 2
max_value = 1.0
step = 0.01
value = 1.0

[node name="Label3" type="Label" parent="VBoxContainer"]
layout_mode = 2
text = "Blend Mode:"

[node name="BlendModes" type="OptionButton" parent="VBoxContainer"]
layout_mode = 2
selected = 0
item_count = 4
popup/item_0/text = "Mix"
popup/item_0/id = 0
popup/item_1/text = "Add"
popup/item_1/id = 1
popup/item_2/text = "Subtract"
popup/item_2/id = 2
popup/item_3/text = "Multiply"
popup/item_3/id = 3

[node name="VertexPainter3D" type="Node3D" parent="." node_paths=PackedStringArray("preview_sphere")]
script = ExtResource("2_vflpc")
preview_sphere = NodePath("../PreviewSphere")

[node name="SubViewport" type="SubViewport" parent="."]
handle_input_locally = false
canvas_item_default_texture_filter = 0
positional_shadow_atlas_size = 0
positional_shadow_atlas_quad_0 = 0
positional_shadow_atlas_quad_1 = 0
positional_shadow_atlas_quad_2 = 0
positional_shadow_atlas_quad_3 = 0
canvas_cull_mask = 4293918720
size = Vector2i(2, 2)
render_target_update_mode = 1

[node name="MouseCamera3D" type="Camera3D" parent="SubViewport"]
visible = false
cull_mask = 1
environment = SubResource("Environment_hpdng")
projection = 1
size = 0.1
far = 10000.0

[node name="ScreenQuad" type="MeshInstance3D" parent="SubViewport/MouseCamera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.5)
mesh = SubResource("QuadMesh_4magw")
surface_material_override/0 = SubResource("ShaderMaterial_yrme8")

[node name="PreviewSphere" type="MeshInstance3D" parent="."]
transform = Transform3D(0.25, 0, 0, 0, 0.25, 0, 0, 0, 0.25, 0, 0, 0)
visible = false
layers = 2
mesh = SubResource("SphereMesh_8olv6")
surface_material_override/0 = SubResource("StandardMaterial3D_eghqw")

[connection signal="focus_exited" from="VBoxContainer/BrushSize" to="VertexPainter3D" method="_on_brush_line_edit_focus_exited"]
